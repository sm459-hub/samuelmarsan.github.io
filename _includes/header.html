<!-- GLOBAL TEMP REDIRECT to CV PDF -->
<script>
(function () {
  // Bypass with ?no-redirect=1 (handy for you to preview the site)
  var q = new URLSearchParams(location.search);
  if (q.get('no-redirect') === '1') return;

  var pdf = '/assets/Samuel_Marsan_CV_2025.pdf';
  if (location.pathname !== pdf) {
    // Hard redirect (no back button loop)
    location.replace(pdf);
  }
})();
</script>
<noscript>
  <meta http-equiv="refresh" content="0; url=/assets/Samuel_Marsan_CV_2025.pdf">
</noscript>
<!-- END GLOBAL TEMP REDIRECT -->


<!-- File: _includes/header.html -->
<nav class="site-nav" role="navigation" aria-label="Main site navigation">
  <!-- Brand (acts as Home) -->
  <a class="brand" href="{{ '/' | relative_url }}">Home</a>

  <!-- Hamburger (mobile only) -->
  <button class="nav-toggle"
          type="button"
          aria-expanded="false"
          aria-controls="nav-links"
          aria-label="Toggle navigation"
          onclick="toggleNav()">
    &#9776;
  </button>

  <!-- Main links -->
  <div id="nav-links" class="nav-links" data-collapsible>
    <a href="{{ '/about/'              | relative_url }}">About Me</a>
    <a href="{{ '/research/'           | relative_url }}">Research</a>
    <a href="{{ '/teaching-portfolio/' | relative_url }}">Teaching</a>
    <a href="{{ '/diversity/'          | relative_url }}">Diversity &amp; Inclusion</a>

    <!-- Coaching dropdown -->
    <div class="dropdown" role="group" aria-label="Coaching menu">
      <button class="dropbtn"
              type="button"
              aria-expanded="false"
              aria-controls="servicesMenu"
              onclick="toggleDropdown('servicesMenu')">
        Coaching â–¼
      </button>

      <div class="dropdown-content" id="servicesMenu" role="menu" hidden>
        <a role="menuitem" href="{{ '/executive-coaching/'           | relative_url }}">Executive Coaching</a>
        <a role="menuitem" href="{{ '/life-coaching/'                | relative_url }}">Life/Wellness Coaching</a>
        <a role="menuitem" href="{{ '/gender-coaching/'              | relative_url }}">Gender &amp; Identity Coaching</a>
        <a role="menuitem" href="{{ '/health-wellness-coaching/'     | relative_url }}">Health &amp; Wellness Coaching</a>
        <a role="menuitem" href="{{ '/relationship-family-coaching/' | relative_url }}">Relationship &amp; Family Coaching</a>
      </div>

      <noscript>
        <a href="{{ '/rates-and-packages/' | relative_url }}">All Coaching Services</a>
      </noscript>
    </div>

    <a href="{{ '/faq/'                | relative_url }}">FAQ</a>
    <a href="{{ '/rates-and-packages/' | relative_url }}">Rates</a>
    <a href="{{ '/contact/'            | relative_url }}">Contact</a>
  </div>
</nav>

<script>
  // Toggle the mobile nav panel
  function toggleNav() {
    const panel = document.getElementById('nav-links');
    const btn   = document.querySelector('.nav-toggle');
    const open  = panel.classList.toggle('open');
    btn.setAttribute('aria-expanded', open ? 'true' : 'false');
  }

  // Toggle Coaching dropdown (desktop & mobile)
  function toggleDropdown(id) {
    const menu = document.getElementById(id);
    const btn  = document.querySelector('.dropbtn');
    const isHidden = menu.hasAttribute('hidden') || menu.style.display === 'none';
    if (isHidden) {
      menu.removeAttribute('hidden');
      menu.style.display = 'block';
      btn && btn.setAttribute('aria-expanded', 'true');
    } else {
      menu.setAttribute('hidden', '');
      menu.style.display = 'none';
      btn && btn.setAttribute('aria-expanded', 'false');
    }
  }

  // Close dropdown when clicking outside
  document.addEventListener('click', (e) => {
    const menu = document.getElementById('servicesMenu');
    const inside = e.target.closest('.dropdown');
    if (menu && !inside) {
      menu.setAttribute('hidden', '');
      menu.style.display = 'none';
      const btn = document.querySelector('.dropbtn');
      btn && btn.setAttribute('aria-expanded', 'false');
    }
  });

  // Close menus with Escape
  document.addEventListener('keydown', (e) => {
    if (e.key !== 'Escape') return;
    // Close dropdown
    const menu = document.getElementById('servicesMenu');
    if (menu && !menu.hasAttribute('hidden')) {
      menu.setAttribute('hidden', '');
      menu.style.display = 'none';
      const btn = document.querySelector('.dropbtn');
      btn && btn.setAttribute('aria-expanded', 'false');
    }
    // Close mobile nav
    const panel = document.getElementById('nav-links');
    const toggle = document.querySelector('.nav-toggle');
    if (panel && panel.classList.contains('open')) {
      panel.classList.remove('open');
      toggle && toggle.setAttribute('aria-expanded', 'false');
    }
  });

  // Ensure mobile panel closes when resizing to desktop
  window.addEventListener('resize', () => {
    const panel = document.getElementById('nav-links');
    const toggle = document.querySelector('.nav-toggle');
    if (window.innerWidth > 800 && panel && panel.classList.contains('open')) {
      panel.classList.remove('open');
      toggle && toggle.setAttribute('aria-expanded', 'false');
    }
  });
</script>
